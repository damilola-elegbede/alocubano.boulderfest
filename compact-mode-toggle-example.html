<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Compact Mode Toggle - A Lo Cubano Boulder Fest Admin</title>
    <link rel="stylesheet" href="/css/base.css">
    <link rel="stylesheet" href="/css/typography.css">
    <link rel="stylesheet" href="/css/components.css">
    <link rel="stylesheet" href="/css/admin-overrides.css">
    <link rel="stylesheet" href="/css/admin-test-mode.css">
</head>
<body>
    <!-- Skip Links for Accessibility -->
    <a href="#main-content" class="skip-link">Skip to main content</a>
    <a href="#mode-toggle" class="skip-link">Skip to mode toggle</a>

    <header style="background: var(--color-surface); padding: var(--space-lg); margin-bottom: var(--space-xl); border-radius: var(--radius-lg);">
        <h1 style="font-family: var(--font-display); font-size: var(--font-size-2xl); margin: 0; text-align: center;">Compact Mode Toggle Examples</h1>
        <p style="text-align: center; color: var(--color-text-secondary); margin-top: var(--space-sm);">A Lo Cubano Boulder Fest - Admin Dashboard Mode Selector</p>
    </header>

    <main id="main-content" style="max-width: 1200px; margin: 0 auto; padding: 0 var(--space-lg);">

        <!-- Example 1: Header Placement -->
        <section style="margin-bottom: var(--space-xl);">
            <h2 style="font-family: var(--font-display); margin-bottom: var(--space-lg);">1. Header Placement</h2>
            <div style="background: var(--color-surface); border: 2px solid var(--color-border); border-radius: var(--radius-lg); padding: var(--space-lg);">
                <div class="admin-header-actions" style="display: flex; align-items: center; justify-content: space-between; flex-wrap: wrap; gap: var(--space-lg);">
                    <div>
                        <h3 style="margin: 0; font-family: var(--font-display);">Admin Dashboard</h3>
                    </div>

                    <!-- Compact Mode Toggle in Header -->
                    <div id="header-mode-toggle" class="compact-mode-toggle" role="group" aria-labelledby="header-mode-label">
                        <span id="header-mode-label" class="mode-toggle-label">Data Mode</span>
                        <div class="mode-switch" role="radiogroup" aria-labelledby="header-mode-label" aria-describedby="header-mode-description">
                            <button
                                class="mode-option active"
                                role="radio"
                                aria-checked="true"
                                aria-label="Production data view"
                                data-mode="production"
                                onclick="switchMode(this, 'production')">
                                <span class="mode-icon" aria-hidden="true">🎯</span>
                                <span>Live</span>
                            </button>
                            <button
                                class="mode-option"
                                role="radio"
                                aria-checked="false"
                                aria-label="Test data view"
                                data-mode="test"
                                onclick="switchMode(this, 'test')">
                                <span class="mode-icon" aria-hidden="true">🧪</span>
                                <span>Test</span>
                            </button>
                        </div>
                        <div class="mode-status-dot" aria-hidden="true"></div>
                        <span id="header-mode-description" class="visually-hidden">Choose between viewing production data or test data. Production data shows live festival information while test data shows sample information for testing.</span>
                    </div>

                    <div style="display: flex; gap: var(--space-sm);">
                        <button class="admin-btn admin-btn-success">
                            <span>Sync</span>
                        </button>
                        <button class="admin-btn admin-btn-primary">
                            <span>Logout</span>
                        </button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Example 2: Inline/Standalone -->
        <section style="margin-bottom: var(--space-xl);">
            <h2 style="font-family: var(--font-display); margin-bottom: var(--space-lg);">2. Standalone/Inline</h2>
            <div style="background: var(--color-surface); border: 2px solid var(--color-border); border-radius: var(--radius-lg); padding: var(--space-xl); text-align: center);">

                <!-- Compact Mode Toggle Standalone -->
                <div id="standalone-mode-toggle" class="compact-mode-toggle" role="group" aria-labelledby="standalone-mode-label" style="display: inline-flex; margin-bottom: var(--space-lg);">
                    <span id="standalone-mode-label" class="mode-toggle-label">View Mode</span>
                    <div class="mode-switch" role="radiogroup" aria-labelledby="standalone-mode-label" aria-describedby="standalone-mode-description">
                        <button
                            class="mode-option active"
                            role="radio"
                            aria-checked="true"
                            aria-label="Production data view"
                            data-mode="production"
                            onclick="switchMode(this, 'production')">
                            <span class="mode-icon" aria-hidden="true">🎯</span>
                            <span>Production</span>
                        </button>
                        <button
                            class="mode-option"
                            role="radio"
                            aria-checked="false"
                            aria-label="Test data view"
                            data-mode="test"
                            onclick="switchMode(this, 'test')">
                            <span class="mode-icon" aria-hidden="true">🧪</span>
                            <span>Test</span>
                        </button>
                    </div>
                    <div class="mode-status-dot" aria-hidden="true"></div>
                    <span id="standalone-mode-description" class="visually-hidden">Choose between viewing production data or test data. Production data shows live festival information while test data shows sample information for testing.</span>
                </div>

                <p style="color: var(--color-text-secondary);">Content changes based on selected mode...</p>
            </div>
        </section>

        <!-- Example 3: Floating Toggle -->
        <section style="margin-bottom: var(--space-xl);">
            <h2 style="font-family: var(--font-display); margin-bottom: var(--space-lg);">3. Floating Toggle</h2>
            <p style="color: var(--color-text-secondary); margin-bottom: var(--space-lg);">Look for the floating toggle in the top-right corner (or top-center on mobile)</p>
            <div style="background: var(--color-surface); border: 2px solid var(--color-border); border-radius: var(--radius-lg); padding: var(--space-xl); min-height: 300px; position: relative;">
                <p style="text-align: center; color: var(--color-text-secondary);">
                    Dashboard content area...<br>
                    <small>The floating toggle appears fixed in the viewport</small>
                </p>
            </div>
        </section>

        <!-- Example 4: Loading States -->
        <section style="margin-bottom: var(--space-xl);">
            <h2 style="font-family: var(--font-display); margin-bottom: var(--space-lg);">4. Loading State</h2>
            <div style="background: var(--color-surface); border: 2px solid var(--color-border); border-radius: var(--radius-lg); padding: var(--space-xl); text-align: center);">

                <!-- Compact Mode Toggle with Loading -->
                <div id="loading-mode-toggle" class="compact-mode-toggle loading" role="group" aria-labelledby="loading-mode-label" style="display: inline-flex; margin-bottom: var(--space-lg);">
                    <span id="loading-mode-label" class="mode-toggle-label">Loading Mode</span>
                    <div class="mode-switch" role="radiogroup" aria-labelledby="loading-mode-label" aria-busy="true">
                        <button
                            class="mode-option active"
                            role="radio"
                            aria-checked="true"
                            aria-label="Production data view"
                            data-mode="production"
                            disabled>
                            <span class="mode-icon" aria-hidden="true">🎯</span>
                            <span>Production</span>
                        </button>
                        <button
                            class="mode-option"
                            role="radio"
                            aria-checked="false"
                            aria-label="Test data view"
                            data-mode="test"
                            disabled>
                            <span class="mode-icon" aria-hidden="true">🧪</span>
                            <span>Test</span>
                        </button>
                    </div>
                    <div class="mode-status-dot" aria-hidden="true"></div>
                </div>

                <p style="color: var(--color-text-secondary);">Loading state with disabled interaction...</p>
                <button onclick="toggleLoading()" class="admin-btn admin-btn-outline" style="margin-top: var(--space-md);">
                    <span>Toggle Loading State</span>
                </button>
            </div>
        </section>

        <!-- Accessibility Information -->
        <section style="margin-bottom: var(--space-xl);">
            <h2 style="font-family: var(--font-display); margin-bottom: var(--space-lg);">Accessibility Features</h2>
            <div style="background: var(--color-surface); border: 2px solid var(--color-border); border-radius: var(--radius-lg); padding: var(--space-xl);">
                <ul style="color: var(--color-text-secondary); line-height: var(--line-height-relaxed);">
                    <li>✅ <strong>ARIA Support:</strong> role="radiogroup" and role="radio" for proper screen reader support</li>
                    <li>✅ <strong>Keyboard Navigation:</strong> Tab, Enter, Space, and Arrow keys supported</li>
                    <li>✅ <strong>Focus Management:</strong> Clear focus indicators and logical tab order</li>
                    <li>✅ <strong>Screen Reader Labels:</strong> Descriptive aria-label and aria-describedby attributes</li>
                    <li>✅ <strong>Visual Indicators:</strong> Icons and colors with non-color-dependent cues</li>
                    <li>✅ <strong>Touch-Friendly:</strong> 44px minimum touch target size</li>
                    <li>✅ <strong>High Contrast:</strong> Enhanced borders and outlines for high contrast mode</li>
                    <li>✅ <strong>Reduced Motion:</strong> Respects prefers-reduced-motion preference</li>
                </ul>

                <h3 style="font-family: var(--font-display); margin: var(--space-lg) 0 var(--space-md) 0; font-size: var(--font-size-lg);">Keyboard Shortcuts</h3>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: var(--space-sm);">
                    <div style="display: flex; align-items: center; gap: var(--space-sm); padding: var(--space-sm); background: var(--color-background-secondary); border-radius: var(--radius-sm);">
                        <kbd style="background: var(--color-surface); padding: var(--space-xs); border-radius: var(--radius-xs); font-family: var(--font-code); font-size: var(--font-size-xs);">Tab</kbd>
                        <span>Navigate to toggle</span>
                    </div>
                    <div style="display: flex; align-items: center; gap: var(--space-sm); padding: var(--space-sm); background: var(--color-background-secondary); border-radius: var(--radius-sm);">
                        <kbd style="background: var(--color-surface); padding: var(--space-xs); border-radius: var(--radius-xs); font-family: var(--font-code); font-size: var(--font-size-xs);">←→</kbd>
                        <span>Switch between modes</span>
                    </div>
                    <div style="display: flex; align-items: center; gap: var(--space-sm); padding: var(--space-sm); background: var(--color-background-secondary); border-radius: var(--radius-sm);">
                        <kbd style="background: var(--color-surface); padding: var(--space-xs); border-radius: var(--radius-xs); font-family: var(--font-code); font-size: var(--font-size-xs);">Enter</kbd>
                        <span>Activate selected mode</span>
                    </div>
                    <div style="display: flex; align-items: center; gap: var(--space-sm); padding: var(--space-sm); background: var(--color-background-secondary); border-radius: var(--radius-sm);">
                        <kbd style="background: var(--color-surface); padding: var(--space-xs); border-radius: var(--radius-xs); font-family: var(--font-code); font-size: var(--font-size-xs);">Space</kbd>
                        <span>Activate selected mode</span>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Floating Mode Toggle -->
    <div id="floating-mode-toggle" class="compact-mode-toggle floating-mode-toggle" role="group" aria-labelledby="floating-mode-label">
        <span id="floating-mode-label" class="mode-toggle-label">Data Mode</span>
        <div class="mode-switch" role="radiogroup" aria-labelledby="floating-mode-label" aria-describedby="floating-mode-description">
            <button
                class="mode-option active"
                role="radio"
                aria-checked="true"
                aria-label="Production data view"
                data-mode="production"
                onclick="switchMode(this, 'production')">
                <span class="mode-icon" aria-hidden="true">🎯</span>
                <span>Live</span>
            </button>
            <button
                class="mode-option"
                role="radio"
                aria-checked="false"
                aria-label="Test data view"
                data-mode="test"
                onclick="switchMode(this, 'test')">
                <span class="mode-icon" aria-hidden="true">🧪</span>
                <span>Test</span>
            </button>
        </div>
        <div class="mode-status-dot" aria-hidden="true"></div>
        <span id="floating-mode-description" class="visually-hidden">Choose between viewing production data or test data. Production data shows live festival information while test data shows sample information for testing.</span>
    </div>

    <script>
        // Compact Mode Toggle JavaScript

        // Initialize screen reader announcer
        const announcer = document.createElement('div');
        announcer.id = 'mode-toggle-announcer';
        announcer.setAttribute('aria-live', 'polite');
        announcer.setAttribute('aria-atomic', 'true');
        announcer.className = 'visually-hidden';
        document.body.appendChild(announcer);

        function switchMode(button, mode) {
            const toggle = button.closest('.compact-mode-toggle');
            const modeSwitch = toggle.querySelector('.mode-switch');
            const allOptions = toggle.querySelectorAll('.mode-option');
            const statusDot = toggle.querySelector('.mode-status-dot');

            // Update ARIA states
            allOptions.forEach(option => {
                option.setAttribute('aria-checked', 'false');
                option.classList.remove('active');
            });

            button.setAttribute('aria-checked', 'true');
            button.classList.add('active');

            // Update switch visual state
            if (mode === 'test') {
                modeSwitch.classList.add('test-mode');
            } else {
                modeSwitch.classList.remove('test-mode');
            }

            // Announce change to screen readers
            const modeLabel = mode === 'test' ? 'test data' : 'production data';
            setTimeout(() => {
                announcer.textContent = `Switched to ${modeLabel} view`;
            }, 100);

            // Simulate loading state
            toggle.classList.add('loading');
            allOptions.forEach(option => option.disabled = true);
            modeSwitch.setAttribute('aria-busy', 'true');

            setTimeout(() => {
                toggle.classList.remove('loading');
                allOptions.forEach(option => option.disabled = false);
                modeSwitch.setAttribute('aria-busy', 'false');

                announcer.textContent = `${modeLabel} view loaded successfully`;
            }, 1000);

            console.log(`Mode switched to: ${mode}`);
        }

        function toggleLoading() {
            const toggle = document.getElementById('loading-mode-toggle');
            const modeSwitch = toggle.querySelector('.mode-switch');
            const allOptions = toggle.querySelectorAll('.mode-option');

            if (toggle.classList.contains('loading')) {
                toggle.classList.remove('loading');
                allOptions.forEach(option => option.disabled = false);
                modeSwitch.setAttribute('aria-busy', 'false');
            } else {
                toggle.classList.add('loading');
                allOptions.forEach(option => option.disabled = true);
                modeSwitch.setAttribute('aria-busy', 'true');
            }
        }

        // Keyboard navigation support
        document.addEventListener('keydown', function(event) {
            if (event.target.closest('.mode-switch')) {
                const modeSwitch = event.target.closest('.mode-switch');
                const options = Array.from(modeSwitch.querySelectorAll('.mode-option'));
                const currentIndex = options.indexOf(document.activeElement);

                switch (event.key) {
                    case 'ArrowLeft':
                    case 'ArrowUp':
                        event.preventDefault();
                        const prevIndex = currentIndex > 0 ? currentIndex - 1 : options.length - 1;
                        options[prevIndex].focus();
                        break;

                    case 'ArrowRight':
                    case 'ArrowDown':
                        event.preventDefault();
                        const nextIndex = currentIndex < options.length - 1 ? currentIndex + 1 : 0;
                        options[nextIndex].focus();
                        break;

                    case 'Enter':
                    case ' ':
                        event.preventDefault();
                        if (document.activeElement.matches('.mode-option')) {
                            document.activeElement.click();
                        }
                        break;
                }
            }
        });

        // Focus management for better UX
        document.addEventListener('focus', function(event) {
            if (event.target.matches('.mode-option')) {
                const modeSwitch = event.target.closest('.mode-switch');
                modeSwitch.style.outline = '2px solid var(--color-blue)';
                modeSwitch.style.outlineOffset = '2px';
            }
        });

        document.addEventListener('blur', function(event) {
            if (event.target.matches('.mode-option')) {
                setTimeout(() => {
                    if (!document.activeElement?.closest('.mode-switch')) {
                        const modeSwitches = document.querySelectorAll('.mode-switch');
                        modeSwitches.forEach(modeSwitch => {
                            modeSwitch.style.outline = '';
                            modeSwitch.style.outlineOffset = '';
                        });
                    }
                }, 10);
            }
        });

        console.log('Compact Mode Toggle initialized with full accessibility support');
    </script>
</body>
</html>