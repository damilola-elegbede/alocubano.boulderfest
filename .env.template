# A Lo Cubano Boulder Fest - Payment System Environment Variables
# Copy this file to .env.local and fill in your actual values

# =============================================================================
# STRIPE CONFIGURATION (REQUIRED)
# =============================================================================
# Get these from your Stripe Dashboard: https://dashboard.stripe.com/apikeys
STRIPE_PUBLISHABLE_KEY=pk_test_51...  # Your Stripe publishable key
STRIPE_SECRET_KEY=sk_test_51...       # Your Stripe secret key

# Webhook endpoint secret - configure this in Stripe Dashboard
# Events to listen for: checkout.session.completed, payment_intent.succeeded, 
#                      payment_intent.payment_failed, charge.refunded
STRIPE_WEBHOOK_SECRET=whsec_...       # Your webhook endpoint secret

# =============================================================================
# DATABASE CONFIGURATION (REQUIRED)
# =============================================================================
# Vercel Postgres connection strings
# Get these from your Vercel project dashboard
POSTGRES_URL="postgres://username:password@host:port/database"
POSTGRES_PRISMA_URL="postgres://username:password@host:port/database?pgbouncer=true"
POSTGRES_URL_NON_POOLING="postgres://username:password@host:port/database"

# Database connection pool settings
DB_POOL_MIN=2
DB_POOL_MAX=10
DB_POOL_IDLE_TIMEOUT=30000

# =============================================================================
# EMAIL SERVICE CONFIGURATION (REQUIRED)
# =============================================================================
# SendGrid API configuration
SENDGRID_API_KEY=SG.xxx...            # Your SendGrid API key
SENDGRID_FROM_EMAIL=noreply@alocubanoboulderfest.com
SENDGRID_FROM_NAME="A Lo Cubano Boulder Fest"

# Email template IDs (create these in SendGrid)
SENDGRID_RECEIPT_TEMPLATE_ID=d-xxx...
SENDGRID_FAILURE_TEMPLATE_ID=d-xxx...
SENDGRID_REFUND_TEMPLATE_ID=d-xxx...

# =============================================================================
# PAYPAL CONFIGURATION (OPTIONAL)
# =============================================================================
# PayPal REST API credentials (optional secondary payment method)
PAYPAL_CLIENT_ID=xxx...
PAYPAL_CLIENT_SECRET=xxx...
PAYPAL_WEBHOOK_ID=xxx...
PAYPAL_MODE=sandbox  # or 'live' for production

# =============================================================================
# ANALYTICS & MONITORING
# =============================================================================
# Google Analytics 4 configuration
GA_MEASUREMENT_ID=G-XXXXXXXXXX
GA_API_SECRET=xxx...  # For server-side events

# Sentry error monitoring
SENTRY_DSN=https://xxx@xxx.ingest.sentry.io/xxx
SENTRY_ORG=your-org
SENTRY_PROJECT=your-project

# =============================================================================
# APPLICATION CONFIGURATION
# =============================================================================
# Application environment
NODE_ENV=development  # or 'production'
VERCEL_URL=https://alocubanoboulderfest.com  # Your domain

# Security settings
JWT_SECRET=your-jwt-secret-key-here
SESSION_SECRET=your-session-secret-key

# Rate limiting (requests per window)
RATE_LIMIT_PAYMENT=10     # Payment attempts per 15 minutes
RATE_LIMIT_API=100        # API calls per minute
RATE_LIMIT_WEBHOOK=1000   # Webhook calls per minute

# =============================================================================
# REDIS CONFIGURATION (OPTIONAL - for advanced features)
# =============================================================================
# Redis for inventory management and caching
REDIS_URL=redis://localhost:6379
REDIS_PASSWORD=your-redis-password

# =============================================================================
# DEVELOPMENT & TESTING
# =============================================================================
# Test mode settings
TEST_MODE=true  # Set to false in production
LOG_LEVEL=debug # error, warn, info, debug

# Stripe test cards (for development only)
# 4242424242424242 - Successful payment
# 4000000000000002 - Card declined
# 4000000000009995 - Insufficient funds

# =============================================================================
# TICKET CONFIGURATION
# =============================================================================
# Festival details
FESTIVAL_NAME="A Lo Cubano Boulder Fest"
FESTIVAL_YEAR=2026
FESTIVAL_DATES="May 15-17, 2026"
FESTIVAL_VENUE="Avalon Ballroom"
FESTIVAL_ADDRESS="6185 Arapahoe Rd, Boulder, CO"

# Ticket inventory limits (initial stock)
TICKET_FULL_PASS_STOCK=1000
TICKET_SINGLE_DAY_STOCK=500
TICKET_VIP_STOCK=100
TICKET_DONATION_STOCK=999999

# Pricing (in cents)
TICKET_FULL_PASS_PRICE=15000  # $150.00
TICKET_SINGLE_DAY_PRICE=7500  # $75.00
TICKET_VIP_PRICE=35000        # $350.00

# Order limits
MAX_TICKETS_PER_ORDER=10
MAX_VIP_PER_ORDER=4
RESERVATION_TIMEOUT=900  # 15 minutes in seconds

# =============================================================================
# FEATURE FLAGS
# =============================================================================
# Enable/disable features
ENABLE_PAYPAL=false
ENABLE_DONATIONS=true
ENABLE_VIP_TICKETS=true
ENABLE_EARLY_BIRD=false
ENABLE_GROUP_DISCOUNTS=false

# Maintenance mode
MAINTENANCE_MODE=false
MAINTENANCE_MESSAGE="We're updating our payment system. Please try again in a few minutes."

# =============================================================================
# SECURITY CONFIGURATION
# =============================================================================
# IP allowlist for production webhooks (comma-separated)
WEBHOOK_IP_ALLOWLIST=""  # Leave empty to disable IP filtering

# CORS origins (comma-separated)
CORS_ORIGINS="https://alocubanoboulderfest.com,https://www.alocubanoboulderfest.com"

# Security headers
ENABLE_SECURITY_HEADERS=true
ENABLE_RATE_LIMITING=true
ENABLE_IP_FILTERING=false  # Enable in production

# =============================================================================
# LOGGING & DEBUGGING
# =============================================================================
# Log configuration
LOG_PAYMENTS=true
LOG_WEBHOOKS=true
LOG_ERRORS=true
LOG_PERFORMANCE=true

# Debug flags (development only)
DEBUG_STRIPE=false
DEBUG_DATABASE=false
DEBUG_EMAIL=false

# =============================================================================
# BACKUP & RECOVERY
# =============================================================================
# Database backup settings
BACKUP_ENABLED=true
BACKUP_FREQUENCY=daily
BACKUP_RETENTION_DAYS=30

# =============================================================================
# PERFORMANCE TUNING
# =============================================================================
# Connection timeouts (milliseconds)
HTTP_TIMEOUT=30000
DATABASE_TIMEOUT=5000
EMAIL_TIMEOUT=10000

# Cache settings
CACHE_TTL=3600  # 1 hour
ENABLE_CACHE=true

# =============================================================================
# NOTIFICATION SETTINGS
# =============================================================================
# Admin notifications
ADMIN_EMAIL=admin@alocubanoboulderfest.com
NOTIFY_PAYMENT_FAILURES=true
NOTIFY_LOW_INVENTORY=true
NOTIFY_HIGH_ERROR_RATE=true

# Inventory alerts
LOW_INVENTORY_THRESHOLD=50
CRITICAL_INVENTORY_THRESHOLD=10